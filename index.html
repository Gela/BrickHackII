<!DOCTYPE html>
<html>
<head>
    <title>Facial Recognition and Authentication</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
</head>
<body>

<script type="text/javascript">

var id ="";
var isEqual_bool = "";

function detectFace(url) {
   
    var params = {
        // Request parameters
        "returnFaceId": "true",
        "returnFaceLandmarks": "false",
        "returnFaceAttributes": "age,gender"
    };
  
    $.ajax({
        url: "https://api.projectoxford.ai/face/v1.0/detect?" + $.param(params),
        beforeSend: function(xhrObj){
            // Request headers
            xhrObj.setRequestHeader("Content-Type","application/json");
            xhrObj.setRequestHeader("Ocp-Apim-Subscription-Key","af044591052746449c1f6079be666c65");
        },
        type: "POST",
        // Request body

        data: '{"url":"'+url+'"}',
    })
    .done(function(data) {
        id = data[0].faceId; 
        detectComplete();
    })
    .fail(function() {
    alert("error");
    });
 };


//gets a face ID and an array of face IDs, returns true if they're the same
// else returns false
function isEqual(input_id, array_id) {

    $.ajax({
        url: "https://api.projectoxford.ai/face/v1.0/verify?",
        beforeSend: function(xhrObj){
            // Request headers
            xhrObj.setRequestHeader("Content-Type","application/json");
            xhrObj.setRequestHeader("Ocp-Apim-Subscription-Key","af044591052746449c1f6079be666c65");
        },
        type: "POST",
        // Request body
        // The faceId values that you wish to compare should be here:
        data: '{"faceId1":' + faceId1 + ',"faceId2":' + faceId2 + '}',
        })
    .done(function(data) {
        //console.log(data);
        //console.log(data.isIdentical);
        isEqual_bool = data.isIdentical;
        equalComplete();

    })
    .fail(function() {
        alert("error");
    });
};

 function detectComplete(){
        console.log(id);
 }

  function equalComplete(){
        console.log(isEqual_bool);
 }

// to be populated
var faceIds_array = ["\"3cc4e50c-e162-4470-a982-5a6870d8d637\"", "\"61bfd621-1ac6-4564-b739-1e5b08ac2558\""];
var faceId1 = "\"3cc4e50c-e162-4470-a982-5a6870d8d637\"";
var faceId2 = "\"61bfd621-1ac6-4564-b739-1e5b08ac2558\"";

var url = "http://pixel.nymag.com/imgs/daily/intelligencer/2015/08/10/10-donald-trump-debate.w750.h560.2x.jpg";

detectFace(url);
isEqual(faceId1, faceIds_array);

</script>
</body>
</html>